{"version":3,"sources":["../storage-wrap/dist/storage-wrap.esm.js","index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["storage_available","type","storage","window","x","setItem","removeItem","e","DOMException","code","name","length","storage_write","key","value","storage_type","storage_read","getItem","storage_delete","storage_clear","clear","StorageWrap","STORAGE_KEY","handle_error","error","output_target","document","querySelector","error_text","createTextNode","classList","add","innerHTML","appendChild","output_stored_value","stored_value","output_text","handle_click","text_input","getElementById","text_value","handle_clear_click","init","addEventListener","clear_button","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","module"],"mappings":"AEAA,ACAA,IDAI6C,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;AFAA,ACCA,ACCA,SDDSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;AFFF,ACEIjB,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADc,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,IAAAA,IAAI,CAACI,MAAL;AHLJ,AEME,ACAC,GAFD,MDEOnB,SAAP;ADHF,ACIC,IDJKvB,WAAW,GAAG,cAApB;AEIEuC,EAAAA,OAAO,CAACI,IAAR,GAAeL,IAAI,CAACK,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;AFFD,ACID,ACDER,EAAAA,IAAI,CAACS,EDCEtB,IDJI,IEGX,CAAgBuB,GDClB,GAAwB,MCDtB,CAA6BT,OAA7B,EAAsCD,IAAI,CAACW,WAA3C;AFFE,ACIF,ACDD,WFHYhD,YAAT,CAAuBC,KAAvB,EAA8B;AAC1B,ACIN,MAAI,EDJQC,aAAa,GAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAtB;AACA,ACIJ,ACDJ,IAAI6C,IFHU5C,ECIJ,IAAIoB,ACDA,GAAG,CFHO,CCId,EDJiBtB,ACIvB,ACDJ,QFHmC,CAACG,cAAT,kBAAkCL,KAAlC,EAAnB;ADDR,ACEQC,ACIL,GAFD,CDFMA,ACIJ,KFNKzB,EEMEiD,GAAP,EAAY,CDJK,CAACnB,QDFtB,CAA2B7B,ACEnB,CAAwB8B,GDFhC,ACEQ,CAA4B,CDFH,MCEzB;ADDN,ACEMN,ACIJ,ACFJ,IFFQA,EDFFvB,EEMEgD,CCFCuB,IHJP,EEMa,EDJM,CAACzC,ACIJ,ACFlB,CDEmB,ECFE,GDEGiB,GDJhB,ACImB,CAACE,EDJM,EAA1B,CCIU,EAAiBC,KAAjB,CAAuB,+DAAvB,CAAd;ADHI3B,AEEN,IFFMA,EEEF+C,UAAJ,CFFmB,CAACvC,AEEJ,WFFV,CAA0BL,UAA1B;ADDN,ACEG,ACGD,ACDA,MHJE,EEKEsB,OAAJ,EAAa;AFJbhD,AEKE,ACDH,IHJCA,OAAO,EEKEmD,CFLClD,MAAM,CAACF,EEKE,CAACiD,CFLJ,CAAhB,KEK2B,CAAC,CAAD,CAAR,CAAjB;AFJF,ACAC,ACKA,QFLG9C,CAAC,GAAG,kBAAR;AACAF,AEKD,ACDDsE,EAAAA,EHJEtE,OAAO,CAACG,AGIA,GAAGqE,IHJX,CAAgBtE,CAAhB,EAAmBA,CAAnB,CGIqB,CAAC,YAAY;AHHlCF,ACAA,AEIA,IHJAA,IGIIyE,GHJG,ACAEzC,CDAD5B,CGIC,GAAGoB,MHJZ,CAAmBtB,CAAnB,AGIoB,CAACwE,KFJrB,GAAgC,QEIpB,CAA0B,wBAA1B,CAAZ;AHHA,ACAI,ACKN,QDLYnD,CCKL,EFLE,CEKT,GFLE,MCAuB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAtB;ADCL,AEKF,ACFG,GHTF,CAME,KGGK,EHHEpB,CAAP,CGGSsE,CHHC,AGGA,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAAChE,MAA1B,EAAkCkE,CAAC,EAAnC,EAAuC;AHFvC,ACDI,AEIF,QFJQ1C,EEIJsB,CHHClD,CAAC,IGGI,CAAC8C,GFJS,GAAGhC,CDCLb,GGGd,CAAkBmE,KAAK,CAACE,CAAD,CHHtB,AGGiB,CAASZ,IAA3B,CHHgC,KCDDjD,AEIMyC,MAAM,CAACV,KFJzB,CAAyBzB,MEIP,EAAzC,EAAgE,CFJzC,CAArB;ADEJf,AEKJ,ACFQoD,IHHJpD,CAAC,CAACE,EGGEkD,CDECN,CFLL,KAAW,EAAX,CGGc,CDElB,ACFmBsB,CDECrB,CFLC,EEKrB,CCFwB,CDEC,ACFAuB,CAAD,CAAN,CAAV;AHFJtE,ACDI,ACMN,ACFK,IHHHA,CAAC,CAACE,ECDQ2B,CCML,CFLL,AEKM,KFLK,AEKAkB,GAAN,CFNL,ACAqB,CCMLC,EDLRpB,CDAW,IEKd,CAAmB,MDLJ,GACVT,QAAQ,CAACG,cAAT,oCAAmDM,ECIxD,EAA2F,IAA3F,IDJK,ACI8F,GAA1G,MDLsB,GAEVT,QAAQ,CAACG,cAAT,CAAwB,0BAA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","file":"storage-demo.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/**\r\n * Tests for the availability of local storage.\r\n * \r\n * reference: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Feature-detecting_localStorage\r\n * \r\n * @param {string} type \r\n */\nfunction storage_available(type) {\n  var storage;\n\n  try {\n    storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e instanceof DOMException && ( // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === 'QuotaExceededError' || // Firefox\n    e.name === 'NS_ERROR_DOM_QUOTA_REACHED') && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\n/**\r\n * \r\n * @param {string} key \r\n * @param {string} value \r\n * @param {string} storage_type // \"localStorage\" or \"sessionStorage\"\r\n */\n\n\nfunction storage_write(key, value, storage_type = \"localStorage\") {\n  if (storage_available(storage_type)) {\n    window[storage_type].setItem(key, value);\n  } else {\n    throw \"Unable to write to storage.\";\n  }\n}\n\nfunction storage_read(key, storage_type = \"localStorage\") {\n  if (storage_available(storage_type)) {\n    return window[storage_type].getItem(key);\n  } else {\n    throw \"Unable to read from storage.\";\n  }\n}\n\nfunction storage_delete(key, storage_type = \"localStorage\") {\n  if (storage_available(storage_type)) {\n    window[storage_type].removeItem(key);\n  } else {\n    throw \"Unable to remove item from storage.\";\n  }\n}\n\nfunction storage_clear(storage_type) {\n  if (storage_available(storage_type)) {\n    window[storage_type].clear();\n  } else {\n    throw \"Unable to clear storage.\";\n  }\n}\n\nconst StorageWrap = {\n  storage_clear,\n  storage_delete,\n  storage_read,\n  storage_write\n};\n\nexport default StorageWrap;\n","import \"./main.css\";\r\nimport StorageWrap from \"../storage-wrap/dist/storage-wrap.esm.js\";\r\n\r\nconst STORAGE_KEY = \"test_storage\";\r\n\r\n(function () {\r\n    function handle_error (error) {\r\n        const output_target = document.querySelector(\".js-output\");\r\n        const error_text = document.createTextNode(`Error: ${error}`);\r\n        output_target.classList.add(\"error\");\r\n        output_target.innerHTML = \"\";\r\n        output_target.appendChild(error_text);\r\n    };\r\n\r\n    function output_stored_value () {\r\n        const output_target = document.querySelector(\".js-output\");\r\n        const stored_value = StorageWrap.storage_read(STORAGE_KEY);\r\n\r\n        const output_text = (\r\n            stored_value\r\n            ? document.createTextNode(`Local storage contains \"${stored_value}\".`)\r\n            : document.createTextNode(\"There is no stored value\")\r\n        );\r\n        \r\n        output_target.innerHTML = '';\r\n        output_target.appendChild(output_text);\r\n    };\r\n\r\n    function handle_click (e) {\r\n        const text_input = document.getElementById(\"test-string\");\r\n        const text_value = text_input.value;\r\n        if (text_value) {\r\n            try {\r\n                StorageWrap.storage_write(STORAGE_KEY, text_value);\r\n                output_stored_value();\r\n            } catch (error) {\r\n                handle_error(error);\r\n            };\r\n            text_input.value = null;\r\n        };\r\n    };\r\n\r\n    function handle_clear_click (e) {\r\n        try {\r\n            StorageWrap.storage_clear(\"localStorage\");\r\n            output_stored_value();\r\n        } catch (error) {\r\n            handle_error(error);\r\n        };\r\n    };\r\n\r\n    function init () {\r\n        try {\r\n            output_stored_value();\r\n        } catch (error) {\r\n            handle_error(error);\r\n        };\r\n\r\n        const text_input = document.querySelector(\".js-store-data\");\r\n        text_input.addEventListener(\"click\", handle_click);\r\n\r\n        const clear_button = document.querySelector(\".js-clear-data\");\r\n        clear_button.addEventListener(\"click\", handle_clear_click);\r\n    };\r\n\r\n    window.addEventListener('load', init);\r\n}());","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}